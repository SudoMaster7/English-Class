<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Games Hub - Interactive Learning Platform</title>
    <meta name="description"
        content="Play interactive English learning games - vocabulary, grammar, listening, pronunciation and more!">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <!-- Navigation -->
    <nav class="nav-container">
        <div class="nav-content">
            <a href="#" class="nav-logo">üéÆ English Games Hub</a>
            <div class="nav-links">
                <a href="#games" class="nav-link active">üéØ Games</a>
                <a href="#daily-lesson" class="nav-link">üìö Daily Lesson</a>
                <a href="#stats" class="nav-link">üìä Stats</a>
                <a href="#achievements" class="nav-link">üèÜ Achievements</a>
                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <div class="theme-toggle-slider">üåô</div>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <section class="section" style="padding-top: 4rem;">
            <div class="glass-card" style="padding: 3rem; text-align: center;">
                <h1
                    style="font-size: 3rem; background: linear-gradient(135deg, #10b981 0%, #059669 50%, #34d399 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">
                    Learn English Through Games! üöÄ
                </h1>
                <p style="font-size: 1.25rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto;">
                    Master vocabulary, grammar, listening, and pronunciation with our interactive mini-games. Track your
                    progress and unlock achievements!
                </p>
            </div>
        </section>

        <!-- Quick Stats Dashboard -->
        <section id="stats" class="section">
            <div class="glass-card" style="padding: 2rem;">
                <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    üìä Your Progress
                </h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--gradient-primary); color: white; border-radius: var(--border-radius-md);">
                        <div style="font-size: 2.5rem; font-weight: 800;" id="totalGames">0</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">Games Played</div>
                    </div>
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--gradient-success); color: white; border-radius: var(--border-radius-md);">
                        <div style="font-size: 2.5rem; font-weight: 800;" id="totalScore">0</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">Total Points</div>
                    </div>
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--gradient-warning); color: white; border-radius: var(--border-radius-md);">
                        <div style="font-size: 2.5rem; font-weight: 800;" id="achievementCount">0/10</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">Achievements</div>
                    </div>
                    <div
                        style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%); color: white; border-radius: var(--border-radius-md);">
                        <div style="font-size: 2.5rem; font-weight: 800;" id="timeSpent">0m</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">Time Spent</div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Thematic Lessons Section -->
        <section id="lessons" class="section">
            <h2 style="margin-bottom: 2rem; font-size: 2.5rem; color: var(--text-primary);">
                üìö Thematic Lessons
            </h2>

            <!-- Current Lesson Display -->
            <div class="glass-card" style="padding: 2rem; margin-bottom: 2rem; background: var(--gradient-primary);">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <p style="color: rgba(255,255,255,0.9); margin-bottom: 0.5rem; font-size: 0.9rem;">CURRENT
                            LESSON</p>
                        <h3 id="currentLessonTitle" style="color: white; font-size: 1.75rem; margin: 0;">
                            üè† Daily Routines - A1
                        </h3>
                    </div>
                    <button onclick="startCurrentLesson()" class="btn"
                        style="background: white; color: var(--color-primary); font-weight: 700; min-width: 180px;">
                        Continue Learning ‚Üí
                    </button>
                </div>
            </div>

            <!-- Placement Test Card -->
            <div class="glass-card"
                style="padding: 2rem; margin-bottom: 2rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2)); border: 2px solid rgba(102, 126, 234, 0.3);">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1.5rem;">
                    <div style="flex: 1; min-width: 250px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div style="font-size: 3rem;">üìù</div>
                            <div>
                                <h3 style="color: var(--text-primary); margin: 0; font-size: 1.5rem;">Teste de
                                    Nivelamento</h3>
                                <p style="color: var(--text-secondary); margin: 0; margin-top: 0.25rem;">Descubra seu
                                    n√≠vel de ingl√™s!</p>
                            </div>
                        </div>
                        <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 0;">
                            Responda 20 quest√µes progressivas e descubra seu n√≠vel CEFR (A1 a C2).
                            Receba recomenda√ß√µes personalizadas de por onde come√ßar seus estudos.
                        </p>
                    </div>
                    <div>
                        <button onclick="window.location.href='placement-test.html'" class="btn"
                            style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-weight: 700; padding: 1rem 2rem; font-size: 1.1rem; min-width: 200px; white-space: nowrap;">
                            ‚ú® Fazer Teste
                        </button>
                    </div>
                </div>
            </div>

            <!-- Theme Selector -->
            <div id="themesContainer"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                <!-- Theme cards will be inserted here by JavaScript -->
            </div>
        </section>

        <!-- Games Grid -->
        <section id="games" class="section">
            <h2 style="margin-bottom: 2rem; font-size: 2.5rem; color: var(--text-primary);">
                üéÆ Practice Games
            </h2>
            <div class="game-grid">
                <!-- Memory Match Game -->
                <div class="glass-card game-card" onclick="navigateToGame('memory-match')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">üÉè</div>
                        <h3 class="game-title">Memory Match</h3>
                        <p class="game-description">Match English words with Portuguese translations</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Word Scramble -->
                <div class="glass-card game-card" onclick="navigateToGame('word-scramble')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">üî§</div>
                        <h3 class="game-title">Word Scramble</h3>
                        <p class="game-description">Unscramble jumbled English words</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Typing Challenge -->
                <div class="glass-card game-card" onclick="navigateToGame('typing-challenge')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">‚å®Ô∏è</div>
                        <h3 class="game-title">Typing Challenge</h3>
                        <p class="game-description">Type English sentences quickly and accurately</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Listening Game -->
                <div class="glass-card game-card" onclick="navigateToGame('listening-game')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">üéß</div>
                        <h3 class="game-title">Listening Game</h3>
                        <p class="game-description">Listen and select the correct answer</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Pronunciation Practice -->
                <div class="glass-card game-card" onclick="navigateToGame('pronunciation-game')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">üé§</div>
                        <h3 class="game-title">Pronunciation</h3>
                        <p class="game-description">Practice speaking English words correctly</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Crossword Puzzle -->
                <div class="glass-card game-card" onclick="navigateToGame('crossword')">
                    <div class="game-badge">New</div>
                    <div class="game-card-content">
                        <div class="game-icon">üß©</div>
                        <h3 class="game-title">Crossword Puzzle</h3>
                        <p class="game-description">Complete the vocabulary crossword</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-primary">Play Now</span>
                        </div>
                    </div>
                </div>

                <!-- Daily Lesson (Original) -->
                <div class="glass-card game-card" onclick="navigateToGame('daily-lesson')">
                    <div class="game-card-content">
                        <div class="game-icon">üåÖ</div>
                        <h3 class="game-title">Daily Routines</h3>
                        <p class="game-description">Interactive lesson with quiz and activities</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="btn btn-success">Start Lesson</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Section -->
        <section id="achievements" class="section">
            <div class="glass-card" style="padding: 2rem;">
                <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    üèÜ Achievements
                </h2>
                <div id="achievementsList"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem;">
                    <!-- Achievements will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="section" style="text-align: center; padding: 2rem 0;">
            <p style="color: white; opacity: 0.9; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                Made with üíú by SUDO - 2026
            </p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/lessons.js"></script>
    <script src="js/lesson-ui.js"></script>
    <script src="js/achievements.js"></script>
    <script>
        // Initialize theme
        ThemeManager.init();
        SoundFX.init();

        // Toggle theme function
        function toggleTheme() {
            const newTheme = ThemeManager.toggle();
            const slider = document.querySelector('.theme-toggle-slider');
            slider.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            SoundFX.play('click');
        }

        // Navigate to game
        function navigateToGame(gameName) {
            SoundFX.play('click');
            if (gameName === 'daily-lesson') {
                window.location.href = 'daily-lesson.html';
            } else {
                window.location.href = `games/${gameName}.html`;
            }
        }

        // Update stats dashboard
        function updateDashboard() {
            const stats = UserProgress.getStats();

            document.getElementById('totalGames').textContent = stats.gamesPlayed;
            document.getElementById('totalScore').textContent = stats.totalScore;

            const progress = Achievements.getProgress();
            document.getElementById('achievementCount').textContent =
                `${progress.unlocked}/${progress.total}`;

            const minutes = Math.floor(stats.timeSpent / 60);
            document.getElementById('timeSpent').textContent =
                minutes < 60 ? `${minutes}m` : `${Math.floor(minutes / 60)}h ${minutes % 60}m`;
        }

        // Load achievements
        function loadAchievements() {
            const achievementsList = document.getElementById('achievementsList');
            const allAchievements = Achievements.getAll();
            const stats = UserProgress.getStats();
            const unlockedIds = stats.achievements || [];

            achievementsList.innerHTML = allAchievements.map(achievement => {
                const isUnlocked = unlockedIds.includes(achievement.id);
                return `
                    <div class="glass-card" style="padding: 1.5rem; text-align: center; ${isUnlocked ? '' : 'opacity: 0.5; filter: grayscale(1);'}">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">${achievement.icon}</div>
                        <h3 style="font-size: 1rem; margin-bottom: 0.5rem; color: var(--text-primary);">
                            ${achievement.name}
                        </h3>
                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0;">
                            ${achievement.description}
                        </p>
                        ${isUnlocked ? '<div style="margin-top: 0.5rem; color: #10b981; font-weight: 600; font-size: 0.9rem;">‚úì Unlocked</div>' : ''}
                    </div>
                `;
            }).join('');
        }

        // Smooth scroll for navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href && href.startsWith('#')) {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        SoundFX.play('click');
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });

                        // Update active state
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                }
            });
        });

        // ===== LESSON MANAGEMENT =====
        const lessonManager = new LessonManager();

        // Load lessons
        function loadLessons() {
            loadThemes();
            updateCurrentLessonDisplay();
        }

        // Load and display theme cards
        function loadThemes() {
            const container = document.getElementById('themesContainer');
            const themes = lessonManager.getThemes();

            container.innerHTML = themes.map(theme => {
                const completion = UserProgress.getThemeCompletion(theme.id);
                return `
                    <div class="glass-card" style="padding: 2rem; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden;"
                         onclick="selectTheme('${theme.id}')" 
                         onmouseenter="this.style.transform='translateY(-4px)'; this.style.boxShadow='var(--shadow-xl)'" 
                         onmouseleave="this.style.transform=''; this.style.boxShadow='var(--shadow-md)'">
                        
                        <div style="position: absolute; bottom: 0; left: 0; height: 4px; background: ${theme.color}; width: ${completion}%; transition: width 0.5s ease;"></div>
                        
                        <div style="text-align: center;">
                            <div style="font-size: 3.5rem; margin-bottom: 1rem;">${theme.icon}</div>
                            <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--text-primary);">
                                ${theme.name}
                            </h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.9rem;">
                                ${theme.description}
                            </p>
                            
                            <div style="background: rgba(16, 185, 129, 0.1); padding: 0.5rem 1rem; border-radius: 20px; display: inline-block; margin-bottom: 1rem;">
                                <span style="color: ${theme.color}; font-weight: 700;">${completion}%</span>
                                <span style="color: var(--text-secondary); font-size: 0.85rem;"> Complete</span>
                            </div>
                            
                            <button class="btn btn-primary" style="width: 100%;" onclick="event.stopPropagation(); selectTheme('${theme.id}');">
                                ${completion > 0 ? 'Continue' : 'Start'} Theme
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Select theme and show levels
        function selectTheme(themeId) {
            SoundFX.play('click');
            const theme = lessonManager.getTheme(themeId);
            if (!theme) return;

            const levels = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2'];
            const levelCards = levels.map(level => {
                const levelInfo = lessonManager.getLevelInfo(level);
                const isUnlocked = UserProgress.isLevelUnlocked(themeId, level);
                const progress = UserProgress.getThemeProgress(themeId)[level];
                const isCompleted = progress?.completed;
                const stars = progress?.stars || 0;

                return `
                    <div style="padding: 1.5rem; background: ${isCompleted ? 'linear-gradient(135deg, rgba(16,185,129,0.1), rgba(5,150,105,0.1))' : 'var(--bg-glass)'}; 
                                border-radius: var(--border-radius-md); border-left: 4px solid ${levelInfo.color}; 
                                cursor: ${isUnlocked ? 'pointer' : 'not-allowed'}; opacity: ${isUnlocked ? '1' : '0.5'}; transition: all 0.3s ease;"
                         onclick="${isUnlocked ? `selectLesson('${themeId}', '${level}'); closeLevelSelector();` : ''}"
                         onmouseenter="${isUnlocked ? 'this.style.transform=\\'translateX(8px) \\'' : ''
            }"
                         onmouseleave = "${isUnlocked ? 'this.style.transform=\\'\\'': ''}" >

                <div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem;">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <span style="background: ${levelInfo.color}; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">${level}</span>
                            <h4 style="margin: 0; color: var(--text-primary);">${levelInfo.name}</h4>
                        </div>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.85rem;">${levelInfo.description}</p>
                    </div>

                    <div style="text-align: center;">
                        ${isCompleted ? `
                                    <div style="color: #10b981; font-size: 1.5rem;">${'‚≠ê'.repeat(stars)}</div>
                                    <div style="font-size: 0.75rem; color: #10b981; font-weight: 600; margin-top: 0.25rem;">‚úì Complete</div>
                                ` : (isUnlocked ? '<div style="color: var(--color-primary); font-size: 1.5rem;">‚ñ∂</div>' : '<div style="font-size: 1.5rem;">üîí</div>')}
                    </div>
                </div>
                    </div >
                `;
            }).join('');

            const modalHTML = `
                < div style = "position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-overlay); display: flex; align-items: center; justify-content: center; z-index: 10000; padding: 1rem;" onclick = "closeLevelSelector()" >
                    <div class="glass-card" style="padding: 3rem; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;" onclick="event.stopPropagation();">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">${theme.icon}</div>
                            <h2 style="font-size: 2rem; margin-bottom: 0.5rem; color: var(--text-primary);">${theme.name}</h2>
                            <p style="color: var(--text-secondary);">${theme.description}</p>
                        </div>

                        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Choose a Level:</h3>
                        <div style="display: grid; gap: 1rem;">${levelCards}</div>

                        <button onclick="closeLevelSelector()" class="btn" style="width: 100%; margin-top: 2rem; background: var(--gradient-error); color: white;">
                            Close
                        </button>
                    </div>
                </div >
                `;
            
            const modal = document.createElement('div');
            modal.id = 'levelSelectorModal';
            modal.innerHTML = modalHTML;
            document.body.appendChild(modal);
        }

        // Close level selector
        function closeLevelSelector() {
            const modal = document.getElementById('levelSelectorModal');
            if (modal) modal.remove();
            SoundFX.play('click');
        }

        // Select a lesson
        function selectLesson(themeId, level) {
            UserProgress.setCurrentLesson(themeId, level);
            updateCurrentLessonDisplay();
            SoundFX.play('success');
        }

        // Start current lesson  
        function startCurrentLesson() {
            alert('The lesson page is coming soon!\\n\\nFor now, select a game to practice with the current theme.');
            SoundFX.play('click');
        }

        // Update current lesson display
        function updateCurrentLessonDisplay() {
            const current = UserProgress.getCurrentLesson();
            const theme = lessonManager.getTheme(current.themeId);
            const levelInfo = lessonManager.getLevelInfo(current.level);
            
            if (theme) {
                document.getElementById('currentLessonTitle').textContent = 
                    `${ theme.icon } ${ theme.name } - ${ current.level } (${ levelInfo.name })`;
            }
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            updateDashboard();
            loadAchievements();
            loadLessons();

            // Update slider icon based on current theme
            const currentTheme = ThemeManager.getCurrent();
            const slider = document.querySelector('.theme-toggle-slider');
            slider.textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        });
    </script>
</body>

</html>